<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Phishing Detection Extension</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .demo-links {
            display: grid;
            gap: 10px;
            margin: 20px 0;
        }
        .demo-link {
            display: block;
            padding: 12px 16px;
            background: white;
            text-decoration: none;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 6px;
            transition: all 0.2s;
        }
        .demo-link:hover {
            background: #f0f0f0;
            border-color: #007bff;
        }
        .demo-link.safe {
            border-left: 4px solid #28a745;
        }
        .demo-link.phishing {
            border-left: 4px solid #dc3545;
        }
        .demo-link.unknown {
            border-left: 4px solid #ffc107;
        }
        .instructions {
            background: #e7f3ff;
            padding: 16px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .popup-preview {
            border: 1px solid #ddd;
            border-radius: 8px;
            width: 300px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <h1>🛡️ Phishing Detection Extension - Test Page</h1>
    
    <div class="instructions">
        <h3>Hướng dẫn test extension:</h3>
        <ol>
            <li>Load extension vào Chrome (Developer mode)</li>
            <li>Click vào icon extension ở thanh toolbar</li>
            <li>Xem popup hiển thị thông tin về trang hiện tại</li>
            <li>Test với các link demo bên dưới</li>
        </ol>
    </div>

    <div class="test-section">
        <h3>🧪 Demo Links để Test</h3>
        <p>Click vào các link sau và xem extension popup phản ứng như thế nào:</p>
        
        <div class="demo-links">
            <a href="https://google.com" class="demo-link safe">
                <strong>🟢 Google.com</strong><br>
                <small>Website an toàn - sẽ hiển thị "Website an toàn" từ database hoặc % an toàn từ model</small>
            </a>
            
            <a href="https://github.com" class="demo-link safe">
                <strong>🟢 GitHub.com</strong><br>
                <small>Website hợp pháp - test với domain tin cậy</small>
            </a>
            
            <a href="http://suspicious-site-example.test" class="demo-link phishing">
                <strong>🔴 Test Phishing URL</strong><br>
                <small>URL test - có thể hiển thị "Website không an toàn" hoặc % phishing</small>
            </a>
            
            <a href="https://unknown-domain-12345.test" class="demo-link unknown">
                <strong>🟡 Unknown Domain</strong><br>
                <small>Domain không xác định - test trường hợp "unknown"</small>
            </a>
            
            <a href="chrome://new-tab-page/" class="demo-link" style="border-left: 4px solid #6c757d;">
                <strong>📄 Chrome New Tab</strong><br>
                <small>Trang Tab mới - sẽ hiển thị "Tab mới" và không kiểm tra phishing</small>
            </a>
            
            <a href="chrome://settings/" class="demo-link" style="border-left: 4px solid #6c757d;">
                <strong>⚙️ Chrome Settings</strong><br>
                <small>Trang cài đặt Chrome - sẽ hiển thị "Trang Chrome"</small>
            </a>
        </div>
    </div>

    <div class="test-section">
        <h3>📋 Các trường hợp hiển thị trong popup:</h3>
        
        <h4>🔍 Khi tìm thấy trong Database:</h4>
        <ul>
            <li><strong>An toàn:</strong> "✅ Website an toàn"</li>
            <li><strong>Phishing:</strong> "⚠️ Website không an toàn"</li>
        </ul>
        
        <h4>🤖 Khi sử dụng AI Model:</h4>
        <ul>
            <li><strong>An toàn:</strong> "🛡️ Có thể an toàn (85%)" + "Mức độ an toàn: 85% an toàn"</li>
            <li><strong>Phishing:</strong> "🚨 Có thể phishing (78%)" + "Khả năng phishing: 78% nguy hiểm"</li>
            <li><em>Lưu ý: % được làm tròn xuống (0.9999... → 99%, không phải 100%)</em></li>
            <li><em>Label thay đổi theo kết quả để tránh nhầm lẫn</em></li>
        </ul>
        
        <h4>🌐 Trang đặc biệt (không kiểm tra):</h4>
        <ul>
            <li><strong>Tab mới:</strong> "📄 Tab mới"</li>
            <li><strong>Chrome pages:</strong> "⚙️ Trang Chrome"</li>
            <li><strong>Extension:</strong> "🧩 Extension"</li>
            <li><strong>About pages:</strong> "ℹ️ Trang About"</li>
        </ul>
        
        <h4>❓ Trường hợp khác:</h4>
        <ul>
            <li><strong>Lỗi/Unknown:</strong> "❓ Không thể xác định"</li>
            <li><strong>Loading:</strong> "🔄 Đang kiểm tra..." với spinner</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>🎯 Preview Popup Design</h3>
        <p>Popup sẽ hiển thị như thế này khi click vào extension icon:</p>
        <div class="popup-preview">
            <iframe src="popup.html" width="300" height="280" frameborder="0"></iframe>
        </div>
    </div>

    <div class="test-section">
        <h3>🔍 Logic hiển thị Confidence</h3>
        <div style="background: #e7f3ff; padding: 16px; border-radius: 6px; margin: 16px 0;">
            <h4>Ví dụ:</h4>
            <ul>
                <li><strong>Website phishing với confidence 0.97:</strong><br>
                    ❌ Cũ: "Độ tin cậy: 97%" (gây nhầm lẫn)<br>
                    ✅ Mới: "Khả năng phishing: 97% nguy hiểm"
                </li>
                <li><strong>Website an toàn với confidence 0.85:</strong><br>
                    ✅ "Mức độ an toàn: 85% an toàn"
                </li>
            </ul>
        </div>
        
        <h3>⚙️ Backend API Response Format</h3>
        <p>Extension sẽ call API <code>/check?url=...</code> và nhận response:</p>
        <pre style="background: #f1f1f1; padding: 10px; border-radius: 4px; overflow-x: auto;"><code>{
  "url": "https://example.com",
  "result": "legitimate|phishing|unknown",
  "source": "database|model|error", 
  "type": "legitimate|phishing|null",
  "confidence": 0.85,
  "elapsed_ms": 123.45
}</code></pre>
    </div>

    <script src="test.js"></script>
</body>
</html>